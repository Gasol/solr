#! /bin/sh /usr/share/dpatch/dpatch-run
## 08_disable-tests-that-need-network-access.dpatch by Jan-Pascal van Best <janpascal@vanbest.org>
##
## All lines beginning with `## DP:' are a description of the patch.
## DP: Disable tests that need network access, because they fail for (some of)
## DP: the autobuilders

@DPATCH@
diff -urNad 1.2.0+ds2~/src/test/org/apache/solr/servlet/SolrRequestParserTest.java 1.2.0+ds2/src/test/org/apache/solr/servlet/SolrRequestParserTest.java
--- 1.2.0+ds2~/src/test/org/apache/solr/servlet/SolrRequestParserTest.java	2007-05-30 17:51:02.000000000 +0200
+++ 1.2.0+ds2/src/test/org/apache/solr/servlet/SolrRequestParserTest.java	2009-06-24 13:55:39.000000000 +0200
@@ -93,7 +93,7 @@
     }
   }
   
-
+/* Disabled for Debian builds because this test needs network access
   public void testStreamURL() throws Exception
   {
     boolean ok = false;
@@ -117,7 +117,7 @@
     assertEquals( 1, streams.size() );
     assertEquals( txt, IOUtils.toString( streams.get(0).getStream() ) );
   }
-  
+*/ 
   public void testUrlParamParsing()
   {
     String[][] teststr = new String[][] {
diff -urNad 1.2.0+ds2~/src/test/org/apache/solr/common/util/ContentStreamTest.java 1.2.0+ds2/src/test/org/apache/solr/common/util/ContentStreamTest.java
--- 1.2.0+ds2~/src/test/org/apache/solr/common/util/ContentStreamTest.java	2007-05-30 17:51:03.000000000 +0200
+++ 1.2.0+ds2/src/test/org/apache/solr/common/util/ContentStreamTest.java	2009-06-24 13:55:59.000000000 +0200
@@ -56,7 +56,7 @@
     assertTrue( IOUtils.contentEquals( new FileReader(      file ), stream.getReader() ) );
   }
   
-
+/* Disabled for Debian build because this test needs network access
   public void testURLStream() throws IOException 
   {
     String content = null;
@@ -88,4 +88,5 @@
     stream = new ContentStreamBase.URLStream( url );
     assertTrue( IOUtils.contentEquals( new StringReader( content ), stream.getReader() ) );
   }
+*/
 }
